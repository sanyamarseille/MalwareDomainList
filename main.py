#!/usr/bin/env python
#coding:UTF-8

##### NOTE ######
# data format
# field[0] = blank
# field[1] = blank
# field[2] = domain
# field[3] = type
# field[4] = original_reference-why_it_was_listed
# field[5] = databaseadded
#################

## set constant
# Database Server URL
URL = 'http://mirror1.malwaredomains.com/files/domains.txt'

## download file path and filename
download_path = './'
download_filename = 'malicious_list.txt'

## import module
import urllib2

## main code
response = urllib2.urlopen(URL)

file = open(download_path + download_filename,'w')
for line in response:
    if line.find('#') == 0:
        continue
    line = line.replace('\r\n','')
    field = [x for x in line.split('\t')]
    file.write(field[3] + ',' + field[2] + ',' + field[5] + '\n')
file.close()